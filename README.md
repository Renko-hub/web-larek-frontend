https://github.com/Renko-hub/web-larek-frontend

- # Проектная работа "Веб-ларек"
-
- Стек: HTML, SCSS, TS, Webpack
-
- ### Установка и запуск
-
- Для установки и запуска проекта выполните следующие команды:
-
- ```bash

  ```

- npm install
- npm run start
- ```

  ```

-
- Или используйте Yarn:
-
- ```bash

  ```

- yarn
- yarn start
- ```

  ```

-
- ### Сборка
-
- Выполните команду сборки:
-
- ```bash

  ```

- npm run build
- ```

  ```

-
- Или с помощью Yarn:
-
- ```bash

  ```

- yarn build
- ```

  ```

-
- ***
-

# Описание проекта

_Проект представляет собой веб-приложение интернет-магазина, построенное на современном стеке технологий с использованием классов и методов ES6+._

## Цель

**Предоставление пользователям функционала для просмотра товаров, добавления их в корзину, оформления заказов и получения уведомлений о результатах покупок.**

### Основные возможности:

- Просмотр каталога товаров.
- Добавление товаров в корзину.
- Оформление заказов с выбором способа оплаты.
- Отправка контактных данных.
- Оповещение пользователей о завершении процесса покупки.

---

## Модули и компоненты

### 1. **index.ts**

#### Описание

Основной модуль приложения, выступающий точкой входа в приложение. Производится общая инициализация и подключение всех необходимых компонентов и функций.

#### Методы и функции:

- handlers: Объекты-обработчики различных событий (`basket:add`, `order:success`, `contact:success`, `product:open-card`), определяющие реакцию на действия пользователя.
- cleanUpEvents: Функция очистки зарегистрированных событий перед выгрузкой страницы.
- Основной цикл приложения: запускается при событии `window.onload`. Выполняется следующая последовательность шагов:
  - Асинхронно загружаются товары с сервера через функцию `loadCatalog`.
  - Происходит инициализация представлений корзины, окна успешных заказов, страниц оформления заказа и контактов, а также просмотра карточек товаров.
  - Инициализируется основной контроллер корзины.
  - Устанавливаются слушатели событий на кнопку корзины в хедере, открывающую окно корзины.

---

### 2. **Page.ts**

#### Описание

Модуль предназначен для рендеринга отдельных элементов каталога товаров и обработки навигационных действий пользователя.

#### Основные классы и функции:

- ProductRenderer: компонент для рендеринга конкретного товара, включающего установку названия, категории, цены, описания и изображения.
- CatalogProductsLoader: загрузка товаров из API и формирование DOM-элементов для каждого товара.
- loadCatalog: асинхронная функция для загрузки всего каталога товаров с сервера.

---

### 3. **BaseModal.ts**

#### Описание

Базовый класс для реализации модальных окон с поддержкой общей функциональности вроде отслеживания внешних кликов и клавиш.

#### Ключевые методы:

- open/close: управление видимостью модального окна.
- setContent: установка содержимого модального окна.
- handleKeyDown/handleOutsideClick: логика реагирования на внешние взаимодействия.

---

### 4. **BasketModel.ts**

#### Описание

Модель корзины, хранящая состояние корзины и обеспечивающая управление товарами в корзине.

#### Функционал:

- Поддерживает коллекцию товаров в виде карты (Map).
- Предоставляет вычисляемые свойства типа общей стоимости корзины и общего количества товаров.
- Предусматривает возможность добавления, удаления товаров и полного очищения корзины.

---

### 5. **BasketController.ts**

#### Описание

Контроллер корзины, взаимодействующий с моделью корзины и системой событий для обновления UI-компонентов.

#### Основное поведение:

- Управляет изменением состояния корзины.
- Следит за изменениями в состоянии корзины и уведомляет интерфейсные компоненты о необходимости перерисовки.

---

### 6. **BasketView.ts**

#### Описание

Представление корзины, управляющее отображением текущего состояния корзины в модальном окне.

#### Особенности:

- Паттерн Singleton позволяет иметь единственное активное представление корзины.
- Позволяет показать или скрыть корзину, а также обновить внешний вид индикатора количества товаров в корзине.

---

### 7. **CardView.ts**

#### Описание

Компонент карточек товаров, позволяющий просматривать детальную информацию о товаре и добавлять его в корзину.

#### Главное назначение:

- Возможность показать карточку товара с возможностью купить или удалить товар из корзины.
- Используется система событий для уведомления о действиях над товаром.

---

### 8. **OrderView.ts**

#### Описание

Отвечает за представление формы оформления заказа.

#### Важность:

- Позволяет собирать контактные данные покупателя и оформлять заказ.
- Работает совместно с модальным окном и реализует логику подтверждения заказа.

---

### 9. **ContactsView.ts**

#### Описание

Обеспечивает работу с вводом контактных данных пользователя при оформлении заказа.

#### Главная задача:

- Собирает контактные данные клиента, проверяя правильность заполнения формы.
- Информирует остальные модули о завершении процесса оформления заказа.

---

### 10. **SuccessView.ts**

#### Описание

Класс для отображения информационного окна успешности выполнения операций (например, завершение покупки).

#### Роль:

- Отображает сообщение об успехе транзакции и позволяет закрыть окно.

---

### 11. **Components.ts**

#### Описание файла

Файл components.ts является частью инфраструктуры фронтенд-проекта и служит хранилищем полезных утилит и функциональных компонентов для удобной работы с интерфейсом и представлениями (views) проекта.

#### Основные компоненты и функции

1. createProductCard
   - Назначение: этот компонент используется для динамического создания карточек товаров в корзине покупок. Каждая карточка состоит из заголовка, описания товара, цены и кнопки для удаления товара из корзины.
   - Аргументы:
     - item: объект типа IProduct, содержащий информацию о продукте (название, категорию, описание, цену и изображение).
     - onRemoveClick: функция обратного вызова, обрабатывающая действие по удалению товара из корзины.
   - Возвращение: возвращает элемент HTML-карточки товара (HTMLLIElement).
2. setupListeners
   - Назначение: эта функция устанавливает слушатели событий для ключевых элементов форм (таких как поля ввода и кнопки способов оплаты). Она обеспечивает связь между действиями пользователя и процессами проверки данных формы.
   - Аргумент: принимает объект с необходимыми полями формы и кнопками способов оплаты.
3. handlePaymentClick
   - Назначение: данная функция применяется для обработки выбора способа оплаты (оплата картой или наличными). Она переключает активные состояния кнопок и вызывает повторную валидацию формы для синхронизации её состояния.
   - Аргументы:
     - activeBtn: активная кнопка способа оплаты.
     - inactiveBtn: пассивная кнопка другого способа оплаты.
     - form: экземпляр формы заказа.
4. toggleActiveButton
   - Назначение: данный метод используется для смены состояний активности кнопок оплаты. Он делает одну кнопку активной, а другую — неактивной.
   - Аргументы:
     - activeBtn: кнопка, которую нужно сделать активной.
     - inactiveBtn: кнопка, которую нужно сделать неактивной.
5. handleInputChange
   - Назначение: обработчик общих изменений в полях формы. Использует передаваемую функцию валидации для автоматической проверки данных при изменении какого-либо поля.
   - Аргументы:
     - event: объект события, вызвавшего изменение поля.
     - validator: функция, выполняющая проверку данных формы.
     - form: исходная форма заказа.
6. resetErrors
   - Назначение: удаляет любые существующие сообщения об ошибках в формах, очищая поля, содержащие предыдущие ошибки.
   - Аргументы: необязательный массив элементов, которые содержат ошибки.
7. displayError
   - Назначение: показывает сообщения об ошибках рядом с соответствующим элементом формы.
   - Аргументы:
     - errorElement: элемент, возле которого должно появиться сообщение об ошибке.
     - message: текстовая информация об ошибке.

#### Дополнительные пояснения

Все указанные выше функции помогают упростить разработку пользовательского интерфейса и автоматизировать процессы проверки данных, обеспечивая единообразие и удобство поддержки проектного кода.

---

### 12. **types.ts**

#### Описание

Определяет основные типы данных, используемые во всём проекте. Сами типы расположены внутри папки ./types/index.ts согласно структуре проекта.

#### Основные типы:

- IProduct: интерфейс описания товара (идентификатор, название, категория, изображение, цена и др.).
- IForm: типизированный интерфейс для форм с описанием полей и кнопок.

---

### 13. **Forms.ts**

#### Описание

Модуль содержит инструменты для проверки и валидации пользовательских форм, используемых в приложении. Это ключевой файл для обеспечения правильной работы с данными пользователей.

#### Функции и компоненты:

- createFormFields: генерирует объекты полей форм на основе указанных CSS-селекторов.
- validateForm: основная функция для валидации формы заказа, проверяющая обязательные поля и выбор способа оплаты.
- validateContactForm: функция для валидации контактной формы, проверяющая корректность введённых электронных писем и номеров телефонов.

Эти функции обеспечивают надежное хранение и обработку данных пользователей, повышая надежность работы приложения.

---

### 14. **constants.ts**

#### Описание

Файл содержит глобальные константы и настройки проекта, используемые различными частями приложения.

#### Что включено:

- API_URL: константа, задающая базовый адрес API, используемый приложением для запросов серверу.
- CDN_URL: адрес Content Delivery Network (CDN), откуда подгружаются ресурсы (изображения, файлы контента).
- Category Classes: карта (объект) стилистических классов для категоризации товаров, применяемая для визуализации различных типов продуктов (другое, soft-skill, hard-skill и др.). Эти классы используются для стилизации карточек товаров в зависимости от их категории.

#### Примечания

Активно применяются следующие утилиты:

- cloneTemplate: копирует шаблон элемента для повторного использования.
- ensureElement: проверяет существование нужного элемента в DOM и создает его, если отсутствует.
- ensureAllElements: применяется для массовой проверки существования нескольких элементов одновременно.

---

## Архитектура проекта

Архитектура основана на популярном подходе **Model–View–Controller (MVC)**:

- **Model (Модель)**:
  - Содержит бизнес-логику и данные (например, модель корзины BasketModel).
  - Хранит коллекции товаров, их характеристики и поддерживает расчет суммы и количества.
- **View (Вид)**:
  - Отвечает за отображение данных пользователю (например, виды карт товаров, форма оформления заказа, страница успешной покупки).
  - Реализует принципы реактивности, автоматически обновляя интерфейс при изменениях данных.
- **Controller (Контроллер)**:
  - Координатор взаимодействия между View и Model.
  - Обрабатывает события от пользователя, такие как добавление товаров в корзину, удаление товаров, подтверждение заказа и прочие операции.

Такая архитектура упрощает разработку и тестирование приложения, делая код легко поддерживаемым и расширяемым.

---

## Новые функции валидации в файле utils.js

- В файл utils.js были добавлены три новые функции для улучшения валидации:
  - isRequired(fieldValue): проверяет наличие значения в указанном поле формы.
  - ValidEmail(email): проверяет корректность формата электронного адреса.
  - validatePhone(phoneNumber): проверяет правильность формата телефонного номера.

---

## Внесенные изменения в HTML и CSS

- Рефакторинг HTML-шаблонов: произведено удаление лишнего кода, улучшение читаемости и производительности.
- Дополнение HTML-шаблонов: введены специальные `<span>` для вывода сообщений об ошибках, облегчивших интеграцию правил валидации.
- CSS-доработки: в файле form.scss появились классы `.visible-error-message` и `.hidden-error-message`, позволяющие управлять отображением ошибок.
- Обновления в modal.scss: улучшена структура оверлея, обеспечивающая правильное отображение модальных окон.
