https://github.com/Renko-hub/web-larek-frontend

- # Проектная работа "Веб-ларек"
-
- Стек: HTML, SCSS, TS, Webpack
-
- ### Установка и запуск
-
- Для установки и запуска проекта выполните следующие команды:
-
- ```bash

  ```

- npm install
- npm run start
- ```

  ```

-
- Или используйте Yarn:
-
- ```bash

  ```

- yarn
- yarn start
- ```

  ```

-
- ### Сборка
-
- Выполните команду сборки:
-
- ```bash

  ```

- npm run build
- ```

  ```

-
- Или с помощью Yarn:
-
- ```bash

  ```

- yarn build
- ```

  ```

-
- ***
-

#### Описание проекта

- **Проект** представляет собой веб-приложение интернет-магазина, построенное на современном стеке технологий с использованием классов и методов ES6+.

- **Цель**: Предоставление пользователям функционала для просмотра товаров, добавления их в корзину, оформления заказов и получения уведомлений о результатах покупок.

- **Основные возможности**:
  - Просмотр каталога товаров.
  - Добавление товаров в корзину.
  - Оформление заказов с выбором способа оплаты.
  - Отправка контактных данных.
  - Оповещение пользователей о завершении процесса покупки.

---

#### Модули и компоненты

##### 1. index.ts

- **Описание**: Основной модуль приложения, выступающий точкой входа в приложение. Здесь производится общая инициализация и подключение всех необходимых компонентов и функций.

- **Методы и функции**:
  - **`handlers`**: Объекты-обработчики различных событий (`basket:add`, `order:success`, `contact:success`, `product:open-card`), определяющие реакцию на действия пользователя.
  - **`cleanUpEvents`**: Функция очистки зарегистрированных событий перед выгрузкой страницы.
  - **Основной цикл приложения**: Запускается при событии `window.onload`. После полной загрузки страницы выполняется следующая последовательность шагов:
    - Асинхронно загружаются товары с сервера через функцию `loadCatalog`.
    - Происходит инициализация представлений корзины, окна успешных заказов, страниц оформления заказа и контактов, а также просмотра карточек товаров.
    - Инициализируется основной контроллер корзины.
    - Устанавливаются слушатели событий на кнопку корзины в хедере, которая открывает окно корзины.

---

##### 2. Page.ts

- **Описание**: Модуль предназначен для рендеринга отдельных элементов каталога товаров и обработки навигационных действий пользователя.

- **Основные классы и функции**:
  - **`ProductRenderer`**: Компонент для рендеринга конкретного товара, включая установку названия, категории, цены, описания и изображения.
  - **`CatalogProductsLoader`**: Загрузка товаров из API и формирование DOM-элементов для каждого товара.
  - **`loadCatalog`**: Асинхронная функция для загрузки всего каталога товаров с сервера.

---

##### 3. BaseModal.ts

- **Описание**: Базовый класс для реализации модальных окон с поддержкой общей функциональности вроде отслеживания внешних кликов и клавиш.

- **Ключевые методы**:
  - **`open / close`**: Управление видимостью модального окна.
  - **`setContent`**: Установка содержимого модального окна.
  - **`handleKeyDown`, `handleOutsideClick`**: Логика реагирования на внешние взаимодействия.

---

##### 4. BasketModel.ts

- **Описание**: Модель корзины, хранящая состояние корзины и обеспечивающая управление товарами в корзине.

- **Функционал**:
  - Поддерживает коллекцию товаров в виде карты (`Map`).
  - Предоставляет вычисляемые свойства типа общей стоимости корзины и общего количества товаров.
  - Предусматривает возможность добавления, удаления товаров и полного очищения корзины.

---

##### 5. BasketController.ts

- **Описание**: Контроллер корзины, взаимодействует с моделью корзины и системой событий для обновления UI-компонентов.

- **Основное поведение**:
  - Управляет изменением состояния корзины.
  - Следит за изменениями в состоянии корзины и уведомляет интерфейсные компоненты о необходимости перерисовки.

---

##### 6. BasketView.ts

- **Описание**: Представление корзины, которое управляет отображением текущего состояния корзины в модальном окне.

- **Особенности**:
  - Паттерн Singleton позволяет иметь единственное активное представление корзины.
  - Позволяет показать или скрыть корзину, а также обновить внешний вид индикатора количества товаров в корзине.

---

##### 7. CardView.ts

- **Описание**: Компонент карточек товаров, позволяющий просматривать детальную информацию о товаре и добавлять его в корзину.

- **Главное назначение**:
  - Возможность показать карточку товара с возможностью купить или удалить товар из корзины.
  - Используется система событий для уведомления о действиях над товаром.

---

##### 8. OrderView.ts

- **Описание**: Отвечает за представление формы оформления заказа.

- **Важность**:
  - Позволяет собирать контактные данные покупателя и оформлять заказ.
  - Работает совместно с модальным окном и реализует логику подтверждения заказа.

---

##### 9. ContactsView.ts

- **Описание**: Обеспечивает работу с вводом контактных данных пользователя при оформлении заказа.

- **Главная задача**:
  - Собирает контактные данные клиента, проверяя правильность заполнения формы.
  - Информирует остальные модули о завершении процесса оформления заказа.

---

##### 10. SuccessView.ts

- **Описание**: Класс для отображения информационного окна успешности выполнения операций (например, завершение покупки).

- **Роль**:
  - Отображает сообщение об успехе транзакции и позволяет закрыть окно.

---

##### 11. Components.ts

- **Описание**: Файл включает вспомогательные утилиты и функциональные компоненты для построения UI.

- **Что входит**:
  - Вспомогательные функции для работы с формами и элементами форм (валидация, настройка стилей, вывод сообщений об ошибках).
  - Глобальные методы для работы с шаблонами и создания карточек товаров.

---

##### 12. types.ts

- **Описание**: Определяет основные типы данных, используемые во всём проекте. Сами типы расположены внутри папки ./types/index.ts согласно стркутуре проекта.

- **Основные типы**:
  - **`IProduct`**: Интерфейс описания товара (идентификатор, название, категория, изображение, цена и др.).
  - **`IForm`**: Типизированный интерфейс для форм с описанием полей и кнопок.

---

##### 13. Forms.ts

- **Описание**: Модуль содержит инструменты для проверки и валидации пользовательских форм, используемых в приложении. Это ключевой файл для обеспечения правильной работы с данными пользователей.

- **Функции и компоненты**:
  - **`createFormFields`**: Генерирует объекты полей форм на основе указанных CSS-селекторов.
  - **`validateForm`**: Основная функция для валидации формы заказа, проверяющая обязательные поля и выбор способа оплаты.
  - **`validateContactForm`**: Функция для валидации контактной формы, проверяющая корректность введенных электронных писем и номеров телефонов.

Эти функции обеспечивают надёжную проверку правильности заполненных данных пользователями, повышая надёжность работы приложения.

---

##### 14. constants.ts

- **Описание**: Файл содержит глобальные константы и настройки проекта, используемые различными частями приложения.

- **Что включено**:
  - **`API_URL`**: Константа, задающая базовый адрес API, используемый приложением для запросов серверу.
  - **`CDN_URL`**: Адрес Content Delivery Network (CDN), откуда подгружаются ресурсы (изображения, файлы контента).
  - **`Category Classes`**: Карта (объект) стилистических классов для категоризации товаров, применяемая для визуализации различных типов продуктов (другое, soft-skill, hard-skill и др.). Эти классы используются для стилизации карточек товаров в зависимости от их категории.

---

#### Примечания

Активно применяются следующие утилиты:

- **`cloneTemplate`**: Копирует шаблон элемента для повторного использования.
- **`ensureElement`**: Проверяет существование нужного элемента в DOM и создаёт его, если отсутствует.
- **`ensureAllElements`**: Применяется для массовой проверки существования нескольких элементов одновременно.

---

#### Архитектура проекта

Архитектура основана на популярном подходе **Model–View–Controller (MVC)**:

- **Model (Модель)**:

  - Содержит бизнес-логику и данные (например, модель корзины `BasketModel`).
  - Хранит коллекции товаров, их характеристики и поддерживает расчёты сумм и количеств.

- **View (Вид)**:

  - Отвечает за отображение данных пользователю (например, виды карт товаров, форма оформления заказа, страница успешной покупки).
  - Реализует принципы реактивности, автоматически обновляя интерфейс при изменениях данных.

- **Controller (Контроллер)**:
  - Координатор взаимодействия между View и Model.
  - Обрабатывает события от пользователя, такие как добавление товаров в корзину, удаление товаров, подтверждение заказа и прочие операции.

Такая архитектура упрощает разработку и тестирование приложения, делая код легко поддерживаемым и расширяемым.

---

#### Новые функции валидации в файле `utils.js`

- В файл `utils.js` были добавлены три новые функции для улучшения валидации:
  - **`isRequired(fieldValue)`**: проверяет наличие значения в указанном поле формы.
  - **`ValidEmail(email)`**: проверяет корректность формата электронного адреса.
  - **`validatePhone(phoneNumber)`**: проверяет правильность формата телефонного номера.

---

#### Внесенные изменения в HTML и CSS

- **Рефакторинг HTML-шаблонов**: Произведена очистка кода, удалены лишние элементы, улучшив читаемость и производительность.
- **Дополнение HTML-шаблонов**: Введены специальные `<span>` для вывода сообщений об ошибках, облегчающих интеграцию правил валидации.
- **CSS-доработки**: В файле `form.scss` появились классы `.visible-error-message` и `.hidden-error-message`, позволяющие управлять отображением ошибок.
- **Обновления в modal.scss**: Улучшена структура оверлея, обеспечивающая корректное отображение модальных окон.
